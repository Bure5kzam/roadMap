---
layout: roadmap-modal
title: user
date: 2023-02-11 23:37
author: 
tags: [devops, linux, group]
summary:
DOM-id: exampleModal1 
---

## Overview

유저 구성은 우분투 보안관리의 기본입니다.

1. 파일 접근 권한 제어
2. 명령어 실행 권한 제어
3. 하드웨어 리소스 점유 권한 제어
4. 작업 내역, 접속 기록이 남음 (모니터링)
5. 계정 비밀번호 변경 주기 관리 및 비활성화를 구성할 수 있음.

## 유저란

유저는 사람이나 특정 응용 프로그램이 파일이나 명령어를 사용할 때 권한을 부여받기 위해 존재합니다.<br/>

처음 설치한 리눅스에는 sudo 권한을 가진 root 계정이 존재하며, `서비스` 또는 `파일` 권한 관리를 위해 추가로 생성해서 사용하게 됩니다.

## 유저의 구성 및 목적

각 사용자는 필수적으로 **UID**(UserID)와 **Username**를 부여받습니다.

**UID**는 유저를 나타내는 양수 숫자이며 일반적으로 고유합니다.

 **username**은 사람이 알아보기 쉬운 이름입니다.

 파일을 생성하면 파일의 소유자, 소유 그룹, 그 외(user, group, other)에 대해 읽기, 쓰기, 실행(read, write, execute) 권한이 생기는데, 엑세스한 유저가 소유자면 `user`권한이 적용 됩니다.

## UID

실제 사용자가 누구냐는 관점에서 유저를 `일반 유저`와 `시스템 유저`로 구분할 수 있습니다.

`일반 유저`는 접속하는 사람에게 홈 디렉토리와 권한을 공유하기 위한 계정입니다.

`시스템 유저`는 프로그램이 파일에 접근하거나 명령어를 실행할 때 권한 문제가 발생하지 않도록 필요 권한을 설정해둔 계정입니다.

기능상 차이는 없지만 우분투에서는 구분을 위해 명시적으로 일반 유저 UID는 1000 이상 숫자를, 시스템 유저는 1000 미만을 사용합니다.

`/etc/login.defs` 파일을 수정하면 UID와 SYS_UID 대역을 변경할 수 있습니다.

```console
# /etc/login.defs 파일
...

#
# Min/max values for automatic uid selection in useradd
#
UID_MIN                  1000
UID_MAX                 60000

# System accounts
SYS_UID_MIN               201
SYS_UID_MAX               999

...

```

---

## SUID

- empty

---

## 유저 정보 파일

| 파일            | 용도                                                                                                                                                                                                                 |
| --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| /etc/passwd     | 유저의 정보 일반적인 (UID, Comment, home directory) 등을 관리하는 파일입니다. <br>`UID` 와 `유저네임` 간 변환에 사용되기 때문에 권한이 생성자인 root가 아니라도 누구나 읽을 수 있게 되어있습니다.                    |
| /etc/shadow     | 암호화 된 비밀번호와 `Password aging` 관련 정보가 있습니다. <br.>읽으려면 `sudo` 권한이 필요합니다.                                                                                                                  |
| /etc/login.defs | - 시스템내 ID 대역 설정 <br> - 유저 기본 UMASK 값 설정<br> - 메일 박스 스풀 경로 설정 <br> - 패스워드 암호화 알고리즘 설정 <br/> - userdel 시 멤버없는 그룹 자동 삭제 허용 <br> - userdel 시 추가 실행할 커맨드 등록 |
| /etc/skel       | useradd 에서 홈디렉토리 생성시 구조를 복제할 수 있음.                                                                                                                                                                |

<!-- 
우분투는 유저 정보를 파일로 관리합니다.

**/etc/passwd**

유저의 정보 일반적인 (UID, Comment, home directory) 등을 관리하는 파일입니다.

```console
[root@localhost ~]# ls -al /etc/passwd
-rw-r--r--. 1 root root 1651  3월 17 20:56 /etc/passwd
```

`UID` 와 `유저네임` 간 변환에 사용되기 때문에 권한이 생성자인 root가 아니라도 누구나 읽을 수 있게 되어있습니다.

 **/etc/shadow**


```console
[root@localhost ~]# ls -al /etc/shadow
----------. 1 root root 1135  3월 17 23:17 /etc/shadow
```


**/etc/login.defs** -->


## 포스트


### 시스템 내 유저 관리하기

- [우분투 사용자 추가]({% link _posts/2023-03-16-linux_master-user_add.md %})

- [우분투 사용자 정보 수정]({% link _posts/2023-03-16-linux_master-user_add.md %})

- [접속중인 유저 모니터링 하기]({% link _posts/2023-03-16-linux_master-user_add.md %})

---
### 기타

- [유저 비밀번호 관리 파일]({% link _posts/2023-03-26-linux_master-user-passwd.md %})

- [유저 홈 디렉토리]({% link _posts/2023-03-20-linux_master-user-home_directory.md %})